!function(t){var e={};function o(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/bundles/administration/",o(o.s="iaiY")}({"6TET":function(t,e,o){},"8Pjr":function(t,e){t.exports='{% block comme_product_configurator_products_list %}\n    <sw-page class="sas-blog-author-list">\n        <template slot="smart-bar-header">\n            <h2>\n                {% block comme_product_configurator_products_list_smart_bar_header_title_text %}\n                    Product Configurator Products\n                {% endblock %}\n            </h2>\n        </template>\n        {% block comme_product_configurator_products_language_change %}\n            <template #language-switch>\n                <sw-language-switch @on-change="onChangeLanguage" />\n            </template>\n        {% endblock %}\n        {% block comme_product_configurator_products_list_smart_bar_actions %}\n            <template slot="smart-bar-actions">\n                {% block comme_product_configurator_products_list_smart_bar_actions_add %}\n                    <sw-button :routerLink="{ name: \'comme.product.configurator.commeProductConfiguratorProductsCreate\' }" variant="danger">\n                        Create new product\n                    </sw-button>\n                {% endblock %}\n            </template>\n        {% endblock %}\n{#        <template #sidebar>#}\n{#            <comme-product-configurator-products-vertical-tabs/>#}\n{#        </template>#}\n        <template #content>\n            {% block comme_product_configurator_products_list_content %}\n                <sw-entity-listing\n                    :repository="productConfiguratorProductsRepository"\n                    :items="productConfiguratorProducts"\n                    :showSelection="false"\n                    detailRoute="comme.product.configurator.categoryDetail"\n                    :columns="columns">\n                </sw-entity-listing>\n            {% endblock %}\n        </template>\n    </sw-page>\n{% endblock %}\n\n'},OApL:function(t){t.exports=JSON.parse('{"comme-product-configurator":{"nested":{"value":"example"},"title":"Comme Product Configurator"},"comme-product-configurator-products":{"general":{"tab-item":"Product Configurator","list-title":"Comme Product Configurator Products list page","detail-title":"Comme Product Configurator Products detail page"},"empty-message":{"message":"Nema scena"},"comme-product-configurator-products-save-success":{"message":"Product Configurator Product has been successfully created","title":"Product Configurator Product saved"},"comme-product-configurator-products-update-success":{"message":"Product Configurator Product has been successfully updated"},"create":{"isActive":"Is active","title":"Title","slug":"Slug","descriptionHeader":"Description header","descriptionFooter":"Description footer"}},"comme-product-configurator-products-seo":{"slug-exists":{"message":"One of the entered slugs already exists"},"slug-empty":{"message":"Slug cannot be empty"}}}')},SZ7m:function(t,e,o){"use strict";function r(t,e){for(var o=[],r={},n=0;n<e.length;n++){var c=e[n],i=c[0],a={id:t+":"+n,css:c[1],media:c[2],sourceMap:c[3]};r[i]?r[i].parts.push(a):o.push(r[i]={id:i,parts:[a]})}return o}o.r(e),o.d(e,"default",(function(){return g}));var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c={},i=n&&(document.head||document.getElementsByTagName("head")[0]),a=null,s=0,u=!1,d=function(){},l=null,p="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function g(t,e,o,n){u=o,l=n||{};var i=r(t,e);return m(i),function(e){for(var o=[],n=0;n<i.length;n++){var a=i[n];(s=c[a.id]).refs--,o.push(s)}e?m(i=r(t,e)):i=[];for(n=0;n<o.length;n++){var s;if(0===(s=o[n]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete c[s.id]}}}}function m(t){for(var e=0;e<t.length;e++){var o=t[e],r=c[o.id];if(r){r.refs++;for(var n=0;n<r.parts.length;n++)r.parts[n](o.parts[n]);for(;n<o.parts.length;n++)r.parts.push(P(o.parts[n]));r.parts.length>o.parts.length&&(r.parts.length=o.parts.length)}else{var i=[];for(n=0;n<o.parts.length;n++)i.push(P(o.parts[n]));c[o.id]={id:o.id,refs:1,parts:i}}}}function h(){var t=document.createElement("style");return t.type="text/css",i.appendChild(t),t}function P(t){var e,o,r=document.querySelector("style["+p+'~="'+t.id+'"]');if(r){if(u)return d;r.parentNode.removeChild(r)}if(f){var n=s++;r=a||(a=h()),e=y.bind(null,r,n,!1),o=y.bind(null,r,n,!0)}else r=h(),e=b.bind(null,r),o=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else o()}}var C,v=(C=[],function(t,e){return C[t]=e,C.filter(Boolean).join("\n")});function y(t,e,o,r){var n=o?"":r.css;if(t.styleSheet)t.styleSheet.cssText=v(e,n);else{var c=document.createTextNode(n),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(c,i[e]):t.appendChild(c)}}function b(t,e){var o=e.css,r=e.media,n=e.sourceMap;if(r&&t.setAttribute("media",r),l.ssrId&&t.setAttribute(p,e.id),n&&(o+="\n/*# sourceURL="+n.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}},dOlM:function(t,e,o){},iaiY:function(t,e,o){"use strict";o.r(e);var r=o("j08e"),n=o("OApL"),c=o("8Pjr"),i=o.n(c);o("sipq");function a(t,e,o,r,n,c,i){try{var a=t[c](i),s=a.value}catch(t){return void o(t)}a.done?e(s):Promise.resolve(s).then(r,n)}Shopware.Component;var s=Shopware.Data.Criteria;Shopware.Utils.object.hasOwnProperty;Shopware.Component.register("comme-product-configurator-products-list",{template:i.a,data:function(){return{isLoading:!1,total:0,productConfiguratorProducts:null}},inject:["repositoryFactory"],mixins:["notification","listing","placeholder"],computed:{columns:function(){return[{property:"parentProductId",label:"Product ID",allowResize:!0,routerLink:"comme.product.configurator.commeProductConfiguratorProductsDetail",primary:!0}]},productConfiguratorProductsRepository:function(){return this.repositoryFactory.create("comme_product_configurator_products")}},created:function(){var t=this;this.productConfiguratorProductsRepository.search(new s,Shopware.Context.api).then((function(e){t.productConfiguratorProducts=t.uniqueElements(e,"parentProductId")}))},methods:{uniqueElements:function(t,e){return t.filter((function(t,o,r){return r.map((function(t){return t[e]})).indexOf(t[e])===o}))},onlyUnique:function(t,e,o){return o.indexOf(t)===o},onChangeLanguage:function(t){Shopware.State.commit("context/setApiLanguageId",t),this.getList()},getList:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isLoading=!0;try{e.productConfiguratorProductsRepository.search(new s,Shopware.Context.api).then((function(t){e.productConfiguratorProducts=e.uniqueElements(t,"parentProductId")}))}catch(t){e.isLoading=!1}case 2:case"end":return t.stop()}}),t)})),function(){var e=this,o=arguments;return new Promise((function(r,n){var c=t.apply(e,o);function i(t){a(c,r,n,i,s,"next",t)}function s(t){a(c,r,n,i,s,"throw",t)}i(void 0)}))})()}}});var u=o("lAfa"),d=o.n(u);Shopware.Component;Shopware.Component.extend("comme-product-configurator-products-create","comme-product-configurator-products-detail",{template:d.a,methods:{createdComponent:function(){this.getProduct(),this.getProducts(),this.getChildProducts(),this.selectedChildProducts=[]},getProduct:function(){this.product=this.productConfiguratorProductsRepository.create("comme_product_configurator_products")},loadAddedProduct:function(){var t=this;this.productConfiguratorProductsRepository.get(this.$route.params.id,Shopware.Context.api,new Criteria).then((function(e){t.product=e}))},onClickSave:function(){var t=this;this.isLoading=!0,this.selectedChildProducts.length>0&&this.selectedChildProducts.forEach((function(e){t.product.childProductId=e.id,console.log(t.product)}))}}});o("wdTR");var l=Shopware,p=(l.Component,l.Mixin),f=l.StateDeprecated,g=(l.Context,Shopware.Data),m=g.Criteria;g.EntityCollection,Shopware.Utils;Shopware.Component.register("comme-product-configurator-products-detail",{template:d.a,inject:["repositoryFactory"],mixins:[p.getByName("notification")],metaInfo:function(){return{title:this.$createTitle()}},data:function(){return{product:null,products:[],selectedParentProduct:null,selectedChildProducts:[],productIds:[],existingChildProducts:[],languageId:Shopware.Context.api.languageId,isLoading:!1,processSuccess:!1,httpClient:null,syncService:null,entity:null,limit:25,seoUrl:{seoPathInfo:""}}},computed:{productConfiguratorProductsRepository:function(){return this.repositoryFactory.create("comme_product_configurator_products")},productRepository:function(){return this.repositoryFactory.create("product")},seoUrlRepository:function(){return this.repositoryFactory.create("seo_url")},languageRepository:function(){return this.repositoryFactory.create("language")},languageStore:function(){return f.getStore("language")}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.getProduct(),this.getProducts(),this.syncService=Shopware.Service("syncService"),this.httpClient=this.syncService.httpClient},getProduct:function(){var t=this;this.productConfiguratorProductsRepository.get(this.$route.params.id,Shopware.Context.api,new m).then((function(e){t.product=e,t.selectedParentProduct=e.parentProductId,t.getExistingChildProducts(),t.getSeoUrl()}))},getExistingChildProducts:function(){var t=this;this.productConfiguratorProductsRepository.search(new m,Shopware.Context.api).then((function(e){if(t.products=[],t.existingChildProducts=[],e.forEach((function(e){e.parentProductId==t.selectedParentProduct&&t.existingChildProducts.push(e.childProductId)})),t.existingChildProducts.length>0){var o=new m;o.setIds(t.existingChildProducts),t.productRepository.search(o,Shopware.Context.api).then((function(e){t.products=[],t.selectedChildProducts=[],e.forEach((function(e){t.selectedChildProducts.push(e)}))}))}}))},getProducts:function(){var t=this;this.productRepository.search(new m,Shopware.Context.api).then((function(e){t.products=[],e.forEach((function(e){t.products.push(e)}))}))},getSeoUrl:function(){var t=this;console.log(this.selectedParentProduct),this.httpClient.get("/_action/get-seo-url/".concat(this.selectedParentProduct),{headers:this.syncService.getBasicHeaders()}).then((function(e){t.seoUrl=e.data})).catch((function(e){t.isLoading=!1,t.createNotificationError({title:"Error while saving the Category",message:e})}))},setSelectedParentProduct:function(t){this.selectedParentProduct=t},setSelectedChildProducts:function(t){this.selectedChildProducts=t},onChangeLanguage:function(t){this.getProduct(),this.languageId=t},arrayComparer:function(t){return function(e){return 0==t.filter((function(t){return t==e})).length}},arrayObjectComparer:function(t){return function(e){return 0==t.filter((function(t){return t.seoPathInfo==e.seoPathInfo})).length}},generateRandomSeo:function(t){for(var e="";e.length<t;)e+=Math.random().toString(16).substring(2);return e.substring(0,t)},searchChildProducts:function(){},onClickSave:function(){var t=this,e=(this.$route.params.id,Shopware.Service("syncService"));e.httpClient,e.getBasicHeaders();this.isLoading=!0,""!==this.selectedParentProduct&&null!==this.selectedParentProduct&&this.selectedChildProducts.length>0&&""!==this.seoUrl.seoPathInfo?(this.seoUrl.seoPathInfo=this.seoUrl.seoPathInfo.replace(/ /g,""),this.httpClient.get("/_action/validate-seo-url/".concat(this.seoUrl.seoPathInfo),{headers:this.syncService.getBasicHeaders()}).then((function(e){if(t.isLoading=!1,console.log("VALIDATE RESPONSE: ",e),e.data>0){t.createNotificationError({title:"Error: Product not saved properly",message:"Entered seo url already exists"}),t.getProduct()}else t.seoUrlRepository.get(t.seoUrl.id,Shopware.Context.api).then((function(e){t.entity=e,t.entity.seoPathInfo=t.seoUrl.seoPathInfo,t.seoUrlRepository.save(t.entity,Shopware.Context.api).then((function(){console.log("Cijeli proizvod: ",t.product),console.log("Odabrani parent proizvod: ",t.selectedParentProduct),console.log("Odabrani child proizvodi: ",t.selectedChildProducts),console.log("Seo url: ",t.seoUrl)}))}))}))):this.createNotificationError({title:"Error while saving product",message:"All fields must be entered"}),this.isLoading=!1,this.processSuccess=!0},saveFinish:function(){this.processSuccess=!1}}});var h=o("wX3M"),P=o.n(h);Shopware.Component.register("comme-product-configurator-vertical-main-tabs",{template:P.a,props:{defaultItem:{type:String,default:"blog"}},methods:{onChangeTab:function(t){this.currentTab=t}}}),Shopware.Module.register("comme-product-configurator",{type:"plugin",name:"comme product configurator",color:"#ff3d58",icon:"default-object-lab-flask",snippets:{"de-DE":r,"en-GB":n},routes:{index:{component:"comme-product-configurator-products-list",path:"index"},commeProductConfiguratorProductsDetail:{component:"comme-product-configurator-products-detail",path:"commeProductConfiguratorProductsDetail/:id",props:{default:function(t){return{commeProductConfiguratorProductsId:t.params.id}}},meta:{parentPath:"comme.product.configurator.index"}},commeProductConfiguratorProductsCreate:{component:"comme-product-configurator-products-create",path:"commeProductConfiguratorProductsCreate",meta:{parentPath:"comme.product.configurator.index"}}},navigation:[{id:"comme-product-configurator",label:"comme-product-configurator.title",color:"#ff3d58",path:"comme.product.configurator.index",icon:"default-object-lab-flask",parent:"sw-extension",position:90}]})},j08e:function(t){t.exports=JSON.parse('{"comme-product-configurator":{"nested":{"value":"example"},"title":"Comme Product Configurator"},"comme-product-configurator-products":{"general":{"tab-item":"Product Configurator","list-title":"Comme Product Configurator Products list page","detail-title":"Comme Product Configurator Products detail page"},"empty-message":{"message":"Nema scena"},"comme-product-configurator-products-save-success":{"message":"Product Configurator Product has been successfully created","title":"Product Configurator Product saved"},"comme-product-configurator-products-update-success":{"message":"Product Configurator Product has been successfully updated"},"create":{"isActive":"Is active","title":"Title","slug":"Slug","descriptionHeader":"Description header","descriptionFooter":"Description footer"}},"comme-product-configurator-products-seo":{"slug-exists":{"message":"One of the entered slugs already exists"},"slug-empty":{"message":"Slug cannot be empty"}}}')},lAfa:function(t,e){t.exports='<sw-page>\n    <template slot="smart-bar-header">\n        <h2>\n            {% block comme_product_configurator_products_list_smart_bar_header_title_text %}\n                Product Detail Page\n            {% endblock %}\n        </h2>\n    </template>\n    <template slot="smart-bar-actions">\n        <sw-button-process\n            :isLoading="isLoading"\n            :processSuccess="processSuccess"\n            variant="danger"\n            @process-finish="saveFinish"\n            @click="onClickSave">\n            Save\n        </sw-button-process>\n    </template>\n\n    <template #language-switch>\n        <sw-language-switch slot="language-switch" @on-change="onChangeLanguage"></sw-language-switch>\n    </template>\n\n    <template slot="content">\n        <sw-card-view>\n            <sw-card>\n                {% block comme_product_configurator_products_single_select %}\n                    <sw-entity-single-select\n                        label="Choose the parent product"\n                        :options="products"\n                        :value="selectedParentProduct"\n                        entity="product"\n                        :display-variants="true"\n                        @change="setSelectedParentProduct"\n                        >\n                    </sw-entity-single-select>\n                {% endblock %}\n                {% block comme_product_configurator_products_multi_select %}\n                    <sw-entity-multi-select\n                        label="Choose the child products"\n                        :entityCollection="selectedChildProducts"\n                        entityName="product"\n                        :display-variants="true"\n                        @change="setSelectedChildProducts">\n                    </sw-entity-multi-select>\n                {% endblock %}\n                <sw-field v-model="seoUrl.seoPathInfo" label="Seo url"></sw-field>\n            </sw-card>\n        </sw-card-view>\n    </template>\n</sw-page>\n'},sipq:function(t,e,o){var r=o("dOlM");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,o("SZ7m").default)("27a53eba",r,!0,{})},wX3M:function(t,e){t.exports='<sw-tabs isVertical :defaultItem="defaultItem" :small="false" class="sw-shop-the-look-tabs" @new-item-active="onChangeTab" >\n    <template #default="{ active }">\n        {% block sas_block_list_tab_item %}\n            <sw-tabs-item\n                variant="minimal"\n                :route="{ name: \'comme.product.configurator.index\' }"\n                :activeTab="active"\n                :native="true"\n                name="Product configurator">\n                {{ $tc(\'comme-product-configurator-products.general.tab-item\') }}\n            </sw-tabs-item>\n        {% endblock %}\n    </template>\n</sw-tabs>\n'},wdTR:function(t,e,o){var r=o("6TET");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,o("SZ7m").default)("6685f58d",r,!0,{})}});